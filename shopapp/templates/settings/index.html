{% extends "layout.html" %}
{% block title %}Settings{% endblock %}

{% block content %}
<section class="hero-halo" data-animate="fade-up">
  <div style="display:flex;align-items:center;gap:18px;">
    <span class="glow-icon" aria-hidden="true">‚öôÔ∏è</span>
    <div>
      <h1 class="page-title" style="margin:0;">Settings</h1>
      <p class="lead">Your command center for branding, access, and integrations.</p>
    </div>
  </div>
</section>

<section class="grid grid-cols-1 grid-cols-md-2" data-animate="fade-up">
  <div class="card" data-animate="card" style="grid-column:span 2;">
    <div style="display:flex;align-items:flex-start;justify-content:space-between;flex-wrap:wrap;gap:24px;">
      <div style="display:flex;gap:16px;align-items:center;">
        <span class="glow-icon" style="font-size:20px;width:46px;height:46px;">üõ∞Ô∏è</span>
        <div>
          <h2 style="margin:0;font-size:22px;">Store snapshot</h2>
          <p class="muted" style="margin:6px 0 0;">Key identity details that sync across invoices and reports.</p>
        </div>
      </div>
      <span class="badge-metric">Plan: 
        {% if active_plan %}
          {{ active_plan.name or active_plan.slug|upper }}
        {% elif profile and profile.trial_active %}
          Trial ¬∑ {{ profile.trial_days_remaining }} days left
        {% else %}
          Not set
        {% endif %}
      </span>
    </div>
    <div style="margin-top:24px;display:flex;flex-wrap:wrap;gap:28px;">
      <div>
        <small class="muted" style="text-transform:uppercase;letter-spacing:.08em;">Store name</small>
        <div style="font-weight:600;font-size:18px;">
          {% set shop_name = (profile.shop_name or profile.name) if profile else None %}
          {% if shop_name %}
            {{ shop_name }}
          {% else %}
            Complete your profile to personalise invoices.
          {% endif %}
        </div>
      </div>
      <div>
        <small class="muted" style="text-transform:uppercase;letter-spacing:.08em;">Currency</small>
        <div style="font-weight:600;font-size:18px;">
          {% if profile and profile.currency %}
            {{ profile.currency }}
          {% else %}
            INR
          {% endif %}
        </div>
      </div>
      <div>
        <small class="muted" style="text-transform:uppercase;letter-spacing:.08em;">Timezone</small>
        <div style="font-weight:600;font-size:18px;">
          {% if profile and profile.timezone %}
            {{ profile.timezone }}
          {% else %}
            Asia/Kolkata
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  {% for section in sections %}
  {% set icon = 'üé®' if 'Branding' in section.title else 'üë•' if 'Team' in section.title else 'üîó' %}
  <a class="card" data-animate="card" href="{{ url_for(section.endpoint) }}" style="text-decoration:none;color:inherit;display:flex;flex-direction:column;gap:18px;">
    <div style="display:flex;align-items:flex-start;gap:14px;">
      <span class="glow-icon" style="font-size:18px;width:40px;height:40px;">{{ icon }}</span>
      <div>
        <h3 style="margin:0 0 6px;font-size:20px;">{{ section.title }}</h3>
        <p class="muted" style="margin:0;">{{ section.description }}</p>
      </div>
    </div>
    <span class="btn btn-outline btn-sm" style="align-self:flex-start;display:inline-flex;align-items:center;gap:8px;">
      Open {{ section.title }}
      <span aria-hidden="true" style="display:inline-flex;width:18px;height:18px;border-radius:6px;background:linear-gradient(135deg, rgba(14,165,255,.6), rgba(0,255,209,.5));color:#05121c;justify-content:center;align-items:center;">‚Ä∫</span>
    </span>
  </a>
  {% endfor %}
</section>
{% endblock %}
