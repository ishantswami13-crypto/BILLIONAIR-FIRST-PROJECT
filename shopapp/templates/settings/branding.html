{% extends 'layout.html' %}
{% block title %}Settings â€¢ Branding{% endblock %}
{% block crumb %}Settings / Branding{% endblock %}

{% block content %}
<div class="bo-card mb-4">
  <h1 class="h4 mb-3">Branding & Invoices</h1>
  <form method="POST" enctype="multipart/form-data" class="row g-3">
    <div class="col-md-6">
      <label class="form-label">Business name</label>
      <input class="form-control bo-input" type="text" name="name" value="{{ profile.name or '' }}" required>
    </div>
    <div class="col-md-6">
      <label class="form-label">Invoice prefix</label>
      <input class="form-control bo-input" type="text" name="invoice_prefix" value="{{ profile.invoice_prefix or 'INV' }}">
    </div>
    <div class="col-12">
      <label class="form-label">Address</label>
      <textarea class="form-control bo-input" name="address" rows="3">{{ profile.address or '' }}</textarea>
    </div>
    <div class="col-md-4">
      <label class="form-label">Phone</label>
      <input class="form-control bo-input" type="text" name="phone" value="{{ profile.phone or '' }}">
    </div>
    <div class="col-md-4">
      <label class="form-label">GST Number</label>
      <input class="form-control bo-input" type="text" name="gst" value="{{ profile.gst or '' }}">
    </div>
    <div class="col-md-4">
      <label class="form-label">Primary colour</label>
      <input class="form-control form-control-color" type="color" name="primary_color" value="{{ profile.primary_color or '#0A2540' }}">
    </div>
    <div class="col-md-4">
      <label class="form-label">Secondary colour</label>
      <input class="form-control form-control-color" type="color" name="secondary_color" value="{{ profile.secondary_color or '#62b5ff' }}">
    </div>

    <div class="col-md-4">
      <label class="form-label">Logo (PNG/SVG)</label>
      <input class="form-control" type="file" name="logo" accept=".png,.jpg,.jpeg,.svg">
      {% if profile.logo_path %}
      <small class="d-block mt-1">Current: {{ profile.logo_path }}</small>
      {% endif %}
    </div>
    <div class="col-md-4">
      <label class="form-label">Authorised signature</label>
      <input class="form-control" type="file" name="signature" accept=".png,.jpg,.jpeg">
      {% if profile.signature_path %}
      <small class="d-block mt-1">Current: {{ profile.signature_path }}</small>
      {% endif %}
    </div>
    <div class="col-md-4">
      <label class="form-label">Watermark</label>
      <input class="form-control" type="file" name="watermark" accept=".png,.jpg,.jpeg">
      {% if profile.watermark_path %}
      <small class="d-block mt-1">Current: {{ profile.watermark_path }}</small>
      {% endif %}
    </div>

    <div class="col-12 text-end">
      <button class="btn bo-btn" type="submit">Save branding</button>
    </div>
  </form>
</div>

<div class="bo-card">
  <div class="d-flex justify-content-between align-items-center mb-2">
    <div>
      <h2 class="h5 mb-1">End-of-day lock</h2>
      <p class="bo-soft mb-0">Once the nightly Z-report runs, sales and expenses are locked to keep books final.</p>
    </div>
    {% if sales_lock %}
    <span class="badge bo-badge-danger">Locked for {{ sales_lock.value }}</span>
    {% else %}
    <span class="badge bo-badge">Unlocked</span>
    {% endif %}
  </div>
  <form method="POST" action="{{ url_for('settings.unlock_day') }}">
    <button class="btn btn-sm bo-btn-outline" type="submit">Override & unlock</button>
  </form>
</div>
{% endblock %}
