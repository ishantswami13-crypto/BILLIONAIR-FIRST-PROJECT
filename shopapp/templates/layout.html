<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Billionair OS{% endblock %}</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/billionair.css') }}">
  {% if GA_MEASUREMENT_ID %}
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ GA_MEASUREMENT_ID }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', '{{ GA_MEASUREMENT_ID }}');
  </script>
  {% endif %}
  {% block head %}{% endblock %}
</head>
<body class="bo-body">
  <div class="bo-backdrop"></div>

  <aside class="bo-sidebar">
    <div class="bo-brand">
      <div class="bo-glyph">B</div>
      <div>
        <div class="bo-title">Billionair OS</div>
        <div class="bo-verified">Verified by Billionair Labs</div>
      </div>
    </div>

    <nav class="bo-nav">
      <a href="{{ url_for('sales.index')|default('#', true) }}" class="bo-nav__item {% if request.path.startswith('/app') %}active{% endif %}">
        <i class="bo-ico">⌂</i> Dashboard
      </a>
      <a href="{{ url_for('reports.zreport_view')|default('#', true) }}" class="bo-nav__item {% if request.path.startswith('/zreport') %}active{% endif %}">
        <i class="bo-ico"></i> Reports
      </a>
      <a href="{{ url_for('inventory.items')|default('#', true) }}" class="bo-nav__item {% if request.path.startswith('/items') %}active{% endif %}">
        <i class="bo-ico">⟲</i> Inventory
      </a>
      <a href="{{ url_for('expenses.expenses')|default('#', true) }}" class="bo-nav__item {% if request.path.startswith('/expenses') %}active{% endif %}">
        <i class="bo-ico">₪</i> Expenses
      </a>
      <a href="{{ url_for('customers.customers')|default('#', true) }}" class="bo-nav__item {% if request.path.startswith('/customers') %}active{% endif %}">
        <i class="bo-ico">◎</i> Customers
      </a>
      <a href="{{ url_for('sales.index')|default('#', true) }}#pos" class="bo-nav__item {% if request.path.endswith('#pos') %}active{% endif %}">
        <i class="bo-ico">↗</i> POS
      </a>
    </nav>

    <div class="bo-plan">
      <div class="bo-card bo-metal">
        <div class="bo-card__label">Access</div>
        <div class="bo-card__title">Lux Core</div>
        <div class="bo-card__meta">Build X.0 • Quantum-AES Shielded</div>
      </div>
    </div>
  </aside>

  <main class="bo-main">
    <header class="bo-topbar">
      <div class="bo-breadcrumb">
        <span class="bo-app">Billionair OS</span>
        <span class="bo-chevron">/</span>
        <span class="bo-page">{% block crumb %}Dashboard{% endblock %}</span>
      </div>
      <div class="d-flex align-items-center gap-3">
        <span class="badge bo-badge">Your data is shielded with Quantum-AES</span>
        {% if session.get('user') %}
          <span class="bo-user">{{ session['user'] }}</span>
          <a class="btn btn-sm bo-btn-outline" href="{{ url_for('auth.logout')|default('#', true) }}">Logout</a>
        {% else %}
          <a class="btn btn-sm bo-btn-outline" href="{{ url_for('auth.login')|default('#', true) }}">Login</a>
        {% endif %}
      </div>
    </header>

    <section class="bo-content">
      {% with messages = get_flashed_messages() %}
        {% if messages %}
        <div class="alert alert-info bo-card bo-card--soft mb-4">
          {% for message in messages %}
            <div>{{ message }}</div>
          {% endfor %}
        </div>
        {% endif %}
      {% endwith %}
      {% block content %}{% endblock %}
    </section>

    <footer class="bo-footer">
      <span>© Billionair Labs</span>
      <span class="text-muted">•</span>
      <span>Latency-optimized • SOC-ready trails • Secure backups</span>
    </footer>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  {% if MIXPANEL_TOKEN %}
  <script>
    (function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];
    b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);
    b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;
    "undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){
    var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};
    c.people.toString=function(){return c.toString(1)+".people (stub)"};i=
    "disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
    for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");
    a.type="text/javascript";a.async=!0;a.src="https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";
    e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);
    mixpanel.init("{{ MIXPANEL_TOKEN }}");
    mixpanel.track('page_view', { path: location.pathname });
    function track(event, props){ try{ if(window.mixpanel){ mixpanel.track(event, props || {}); } }catch(err){} }
  </script>
  {% endif %}
  {% block scripts %}{% endblock %}
</body>
</html>
